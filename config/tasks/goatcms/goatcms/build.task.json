{
  "name": "BuildGoatcmsGoatcms",
  "entrypoint": true,
  "extends": ["CloneGoatcmsGoatcms"],
  "locks": ["data/code/goatcms/goatcms:deploy", "data/code/goatcms/goatcms:archive"],
  "executor": "onlylast",
  "trigger": ["DeployGoatcmsGoatcms", "BuildGoatcmsWebslots", "BuildGoatcmsEmptyapp"],
  "script": {
    "cwd": "data/code/goatcms/goatcms",
    "commands": [{
      "command": "goatcli",
      "args": ["build"]
    }, {
      "command": "dep",
      "args": ["ensure"]
    }, {
      "command": "go",
      "args": ["test", "./cmsapp/..."]
    }, {
      "cwd": "",
      "command": "go",
      "args": ["build", "./main", "-o", "data/archive/goatcms/goatcms/goatcms-latest"]
    }]
  }
}
