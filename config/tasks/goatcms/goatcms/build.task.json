{
  "name": "BuildGoatcmsGoatcms",
  "entrypoint": true,
  "extends": ["CloneGoatcmsGoatcms"],
  "locks": ["/data/code/goatcms/goatcms:deploy", "/data/code/goatcms/goatcms:archive"],
  "executor": "onlylast",
  "trigger": ["DeployGoatcmsGoatcms", "BuildGoatcmsWebslots", "BuildGoatcmsEmptyapp"],
  "script": {
    "cwd": "/go/src/github.com/goatcms/goatcms",
    "commands": [{
      "cwd": ".",
      "command": "sh",
      "args": ["-x", "config/tasks/goatcms/goatcms/build-secrets.sh"]
    }, {
      "command": "goatcli",
      "args": ["build"]
    }, {
      "command": "dep",
      "args": ["ensure"]
    }, {
      "command": "go",
      "args": ["test", "./cmsapp/..."]
    }, {
      "cwd": "",
      "command": "go",
      "args": ["build", "-o", "/data/archive/goatcms/goatcms/goatcms-latest", "./main.go"]
    }]
  }
}
