{
  "name": "BuildProdFirmomCICD",
  "entrypoint": true,
  "extends": [
    "CloneProdFirmomCICD",
    "BuildBackendProdFirmomCICD",
    "BuildFrontendProdFirmomCICD"
  ],
  "locks": ["/data/code/firmom/cicd-prod!deploy"],
  "executor": "onlylast",
  "trigger": ["DeployProdFirmomCICD"],
  "script": {
    "cwd": "/data/code/firmom/cicd-prod/src/github.com/firmom/cicd",
    "commands": [{
      "command": "docker",
      "args": ["build", ".", "-t", "firmom/cicd:prod", "--no-cache"]
    }, {
      "command": "sh",
      "args": ["-x", "/app/config/helpers/docker-push.sh", "firmom/cicd:prod"]
    }]
  }
}